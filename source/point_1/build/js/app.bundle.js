(()=>{"use strict";var e={200:(e,t,o)=>{t.__esModule=!0,t.FormController=void 0;var r=o(682),n=o(890),i=o(274),s=o(211),u=o(414),c=function(){var e=this;this.start=function(){var t,o,r,n=0;null===(t=e.form.getHorseForm())||void 0===t||t.addEventListener("submit",(function(t){t.preventDefault(),n=e.registerHorse(n)}));var i=0,u=0,c=new s.Race;c.setId(parseInt(null===(o=e.form.getRaceId())||void 0===o?void 0:o.value)),null===(r=e.form.getRaceForm())||void 0===r||r.addEventListener("submit",(function(t){var o;t.preventDefault(),u>=4&&(console.log("Horse index: "+u),(new s.Race).setId(parseInt(null===(o=e.form.getRaceId())||void 0===o?void 0:o.value)),console.log(e.raceList[i].getHorseWinner()),e.raceList[i].getHorseWinner().addWin(),e.raceList[i].getHorseWinner().getJockey().addWin(),u=0,i++),e.registerRace(c,i,u)&&u++}))},this.registerHorse=function(t){var o;return t>=4?(alert("No se pueden registrar más caballos"),t):e.wasHorseAdded(t)?(null===(o=e.form.getHorseForm())||void 0===o||o.reset(),++t):t},this.wasHorseAdded=function(t){var o,r,i,s,c=null===(o=document.getElementById("horseName"))||void 0===o?void 0:o.value;if(!u.Utils.isUnique(c,e.horseList))return alert("Nombre del caballo ya registrado"),!1;var a=new n.Horse;return a.setName(c),a.setWeight(parseFloat(null===(r=document.getElementById("horseWeight"))||void 0===r?void 0:r.value)),a.setAge(parseInt(null===(i=document.getElementById("horseAge"))||void 0===i?void 0:i.value)),a.setBreed(null===(s=document.getElementById("horseBreed"))||void 0===s?void 0:s.value),e.horseList[t]=a,e.horseList[t-1]&&a.getAge()<e.horseList[t-1].getAge()&&u.Utils.quickSort(e.horseList,0,t),e.showHorsesList(),!0},this.showHorsesList=function(){document.querySelectorAll("#nameList option").forEach((function(e){return e.remove()}));var t=document.getElementById("nameList");e.horseList.forEach((function(e){var o=document.createElement("option");o.value=e.getName(),o.innerHTML=e.getName(),null==t||t.appendChild(o)}))},this.registerRace=function(t,o,r){var n;return o>e.limit?(alert("No se pueden registrar más carreras"),!1):!!e.addHorseToRace(t,o,r)&&(null===(n=e.form.getRaceForm())||void 0===n||n.reset(),e.form.getRaceId()&&(e.form.getRaceId().value=o>=e.limit?"Límite":(o+1).toString()),!0)},this.addHorseToRace=function(t,o,r){var s,c,a,d,l=u.Utils.findHorse(null===(s=document.getElementById("nameList"))||void 0===s?void 0:s.value,e.horseList);if(console.log("Race index: "+o),e.raceList[o]&&!u.Utils.isUnique((null==l?void 0:l.getName())||"",e.raceList[o].getHorseList()))return alert("Ya se ha registrado la participación del caballo "+(null==l?void 0:l.getName())),!1;var p=new i.Jockey(null===(c=document.getElementById("jockeyName"))||void 0===c?void 0:c.value);return null==l||l.setJockey(p),null==l||l.setDistance(parseFloat(null===(a=document.getElementById("distance"))||void 0===a?void 0:a.value)),null==l||l.setTime(parseFloat(null===(d=document.getElementById("time"))||void 0===d?void 0:d.value)),null==l||l.setSpeed((null==l?void 0:l.getDistance())/(null==l?void 0:l.getTime())),console.log(l),t.addHorseAt(r,l||new n.Horse),u.Utils.selectWinners(l||new n.Horse,t),e.raceList[o]=t,!0},this.form=new r.Form,this.horseList=new Array(4),this.raceList=new Array(10),this.limit=10};t.FormController=c},414:(e,t)=>{t.__esModule=!0,t.Utils=void 0;var o=function(){function e(){}return e.isUnique=function(e,t){for(var o=0;o<t.length;o++){if(null==t[o])return!0;if(e===t[o].getName())return!1}return!0},e.findHorse=function(e,t){for(var o=0,r=t;o<r.length;o++){var n=r[o];if(n.getName()==e)return n}return null},e.selectWinners=function(e,t){t.getHorseWinner()?e.getSpeed()>t.getHorseWinner().getSpeed()&&(t.setSecondPlace(t.getHorseWinner()),t.setHorseWinner(e)):t.setHorseWinner(e)},e.arrayPartition=function(e,t,o){var r,n,i=t-1,s=e[o];for(r=t;r<o;r++)e[r].getAge()<=s.getAge()&&(n=e[++i],e[i]=e[r],e[r]=n);return n=e[i+1],e[i+1]=e[o],e[o]=n,i+1},e.quickSort=function(t,o,r){var n;o<r&&(n=e.arrayPartition(t,o,r),e.quickSort(t,o,n-1),e.quickSort(t,n+1,r))},e}();t.Utils=o},258:(e,t)=>{t.__esModule=!0,t.Competitor=void 0;var o=function(){function e(e){this.name=e||"",this.wins=0}return e.prototype.getName=function(){return this.name},e.prototype.setName=function(e){this.name=e},e.prototype.getWins=function(){return this.wins},e.prototype.addWin=function(){this.wins++},e}();t.Competitor=o},682:(e,t)=>{t.__esModule=!0,t.Form=void 0;var o=function(){function e(){this.horseForm=document.getElementById("horseLog")||void 0,this.raceForm=document.getElementById("raceLog")||void 0,this.raceId=document.getElementById("raceId")||void 0}return e.prototype.getHorseForm=function(){return this.horseForm},e.prototype.getRaceForm=function(){return this.raceForm},e.prototype.getRaceId=function(){return document.getElementById("raceId")},e.prototype.getRaceIdValue=function(){return this.raceId.value},e}();t.Form=o},890:function(e,t,o){var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});t.__esModule=!0,t.Horse=void 0;var i=o(258),s=o(274),u=function(e){function t(){var t=e.call(this)||this;return t.weight=0,t.age=0,t.breed="",t.jockey=new s.Jockey,t.speed=0,t.distance=0,t.time=0,t}return n(t,e),t.prototype.getWeight=function(){return this.weight},t.prototype.setWeight=function(e){this.weight=e},t.prototype.getAge=function(){return this.age},t.prototype.setAge=function(e){this.age=e},t.prototype.getBreed=function(){return this.breed},t.prototype.setBreed=function(e){this.breed=e},t.prototype.getJockey=function(){return this.jockey},t.prototype.setJockey=function(e){this.jockey=e},t.prototype.getSpeed=function(){return this.speed},t.prototype.setSpeed=function(e){this.speed=e},t.prototype.getDistance=function(){return this.distance},t.prototype.setDistance=function(e){this.distance=e},t.prototype.getTime=function(){return this.time},t.prototype.setTime=function(e){this.time=e},t}(i.Competitor);t.Horse=u},274:function(e,t,o){var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});t.__esModule=!0,t.Jockey=void 0;var i=function(e){function t(t){return e.call(this,t||"")||this}return n(t,e),t}(o(258).Competitor);t.Jockey=i},211:(e,t,o)=>{t.__esModule=!0,t.Race=void 0;var r=o(890),n=o(274),i=function(){function e(){this.id=0,this.horseList=new Array(4),this.horseWinner=new r.Horse,this.secondPlace=new r.Horse,this.jockeyWinner=new n.Jockey}return e.prototype.getId=function(){return this.id},e.prototype.setId=function(e){this.id=e},e.prototype.addHorseAt=function(e,t){this.horseList[e]=t},e.prototype.getHorseList=function(){return this.horseList},e.prototype.getHorseAt=function(e){return this.horseList[e]},e.prototype.getHorseWinner=function(){return this.horseWinner},e.prototype.setHorseWinner=function(e){this.horseWinner=e},e.prototype.getSecondPlace=function(){return this.secondPlace},e.prototype.setSecondPlace=function(e){this.secondPlace=e},e.prototype.getJockeyWinner=function(){return this.jockeyWinner},e.prototype.setJockeyWinner=function(e){this.jockeyWinner=e},e}();t.Race=i},376:(e,t,o)=>{o.r(t)}},t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,o),n.exports}o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};(()=>{var e=o(200);o(376);var t=function(){var t,o,r=new e.FormController;null===(t=document.getElementById("horseLog"))||void 0===t||t.reset(),null===(o=document.getElementById("raceLog"))||void 0===o||o.reset(),document.getElementById("raceId").value="1",r.start()};"loading"==document.readyState?document.addEventListener("DOMContentLoaded",t):t()})()})();